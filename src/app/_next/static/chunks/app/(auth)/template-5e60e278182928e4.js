(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3725],{84403:(e,t,a)=>{Promise.resolve().then(a.bind(a,69968))},76046:(e,t,a)=>{"use strict";var n=a(66658);a.o(n,"redirect")&&a.d(t,{redirect:function(){return n.redirect}}),a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},91831:(e,t,a)=>{"use strict";a.d(t,{h:()=>n});let n={Dashboard:"/dashboard",Login:"/login",NotFound:"/not-found",Sys:{Index:"/sys",SysCfMgn:"/sys/cf-mgn",SysDictMgn:"/sys/dict-mgn",SysMenuMgn:"/sys/menu-mgn",SysPgMgn:"/sys/pg-mgn",SysBtnMgn:"/sys/btn-mgn",SysRoleMgn:"/sys/role-mgn",SysUserMgn:"/sys/user-mgn",SysUserPgMgn:"/sys/user-pg-mgn",SysUserActionLogMgn:"/sys/user-action-log-mgn",SysFileDocumentMgn:"/sys/file-document-mgn",SysDataProcessLogMgn:"/sys/data-process-log-mgn"},FundCode:{Index:"/fcm",CurrencyMgn:"/fcm/currency-mgn",FundMasterMgn:"/fcm/fund-master-mgn",FieldAndAbbMeanDefinitionMgn:"/fcm/field-and-abb-mean-definition-mgn",TargetFund:"/fcm/target-fund",CodeType:"/fcm/code-type",FieldAbbreviation:"/fcm/field-abbreviation"},Peer:{Performance:"/peer/perf",FundMaster:"/peer/fund-master",GroupMaster:"/peer/group-master"},Fund:{Index:"/fund",MosCphsiveDetail:"/fund/mos-cphsive-detail",BosIntegration:"/fund/bos-integration",Portfolio:"/fund/portfolio",RateOfReturn:"/fund/retn-rate",DepartmentMgn:"/fund/team",EmployeeMgn:"/fund/empl",CorpSite:"/fund/corp-and-site",KettleFileUpload:"/fund/kettle-file-upload",MasterMgn:"/fund/master-mgn",ExchangeRate:"/fund/exchange-rate",RawDataCfg:"/fund/raw-data-cfg",RawDataComparison:"/fund/raw-data-comparison",FundFlow:"/fund/fund-flow"}}},69968:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(95155);a(12115);var s=a(93297),r=a(39832),o=a(86939),u=a(76046),d=a(91831),i=a(48406);function l(e){return(0,s.A)().user&&r.A.getItem(o.A.storeUser)&&!r.A.getItem(i.d5.cachedRoute)&&(0,u.redirect)(d.h.Dashboard),(0,n.jsx)(n.Fragment,{children:e.children})}},30672:(e,t,a)=>{"use strict";a.d(t,{O:()=>A,c:()=>p});var n=a(95155),s=a(39832),r=a(76046),o=a(12115),u=a(70059),d=a(72441),i=a(59292),l=a(60766),m=a(62246),c=a(86939),g=a(48406),y=a(97491),f=a(4744),h=a(3417);let p=(0,o.createContext)(l.lU),A=e=>{let{children:t}=e;(0,r.useRouter)();let{returnUrl:a}=(0,r.useParams)(),[A,S]=(0,o.useReducer)(i.li,l.lU),[v,I]=(0,o.useState)((0,d.L0)()),[b,_]=(0,o.useState)(null),[M,P]=(0,o.useState)([]),E=(0,h.jL)(),T=async()=>{S({type:m.W.SET_IS_INITIALIZED,payload:!0}),s.A.getItem(c.A.storageAccessTokenKey)&&S({type:m.W.SET_USER,payload:JSON.parse(s.A.getItem(c.A.storeUser))}),S({type:m.W.SET_LOADING,payload:!1})},R=async(e,t)=>await u.Ay.get("/sys/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),k=async(e,t)=>{await u.Ay.post(c.A.loginUrl,e).then(async e=>{let t;let{data:n,status:o}=e.data,{roles:u,userInfo:i,menus:l}=n;(null==(t=await R(null==i?void 0:i.userId,null==n?void 0:n.access_token))?void 0:t.data)&&(t=null==t?void 0:t.data),s.A.setItem(c.A.storageAccessTokenKey,n.access_token),s.A.setItem(c.A.storeRefreshTokenKey,n.refresh_token),S({type:m.W.SET_USER,payload:{...i,role:u,menus:[p,{id:(0,d.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard"},...l]}}),s.A.setItem(c.A.storeUser,JSON.stringify({...i,role:u,menus:[{id:(0,d.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard"},...l],...null==t?void 0:t.data})),s.A.setItem(c.A.tabLinks,JSON.stringify([{id:(0,d.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard",href:"/dashboard"}]));let g=a&&"/"!==a?a:"/";(0,r.redirect)(g)}).catch(e=>{var a;t&&e&&t(null!==(a=null==e?void 0:e.response)&&void 0!==a?a:e)})},D=async e=>{let t=s.A.getItem(c.A.storeUser);if(!t)return;let a={...JSON.parse(t),...e};s.A.setItem(c.A.storeUser,JSON.stringify(a)),S({type:m.W.SET_USER,payload:a})},U=async(e,t)=>{await u.Ay.post(c.A.registerUrl,{...e,phoneNumber:e.phoneNumber.split("-").join(""),fullName:e.bizOrgName}).then(async a=>{var n;let s=a.data;if((null==s?void 0:null===(n=s.status)||void 0===n?void 0:n.success)===!1){t&&t(s);return}await k({username:e.email,password:e.password})}).catch(e=>{t&&t(e)})},N=async()=>{await y.Dv.signOut(),s.A.removeItem(c.A.storageAccessTokenKey),s.A.removeItem(c.A.storeRefreshTokenKey),s.A.removeItem(c.A.storeUser),s.A.removeItem(c.A.tabLinks),s.A.removeItem(g.d5.cachedRoute),s.A.removeItem("navWidth"),S({type:m.W.SET_USER,payload:null}),S({type:m.W.SET_LOADING,payload:!1}),S({type:m.W.SET_IS_INITIALIZED,payload:!1}),E(f.Xp.logout()),I([]),(0,r.redirect)("/login")};return(0,o.useEffect)(()=>{T()},[]),(0,n.jsx)(p.Provider,{value:{...A,login:k,register:U,logout:N,dispatch:S,tabLists:v,setTabListContext:I,updateCachedData:D,tabSelected:b,setTabSelected:_,listMounted:M,setListMounted:P},children:t})}},93297:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(12115),s=a(30672);let r=()=>(0,n.useContext)(s.c)}},e=>{var t=t=>e(e.s=t);e.O(0,[9465,1414,3014,3417,8441,1517,7358],()=>t(84403)),_N_E=e.O()}]);