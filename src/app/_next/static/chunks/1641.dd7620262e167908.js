"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1641],{30672:(e,t,r)=>{r.d(t,{O:()=>f,c:()=>x});var a=r(95155),n=r(39832),s=r(76046),o=r(12115),i=r(70059),l=r(72441),d=r(59292),u=r(60766),m=r(62246),h=r(86939),c=r(48406),p=r(97491),g=r(4744),A=r(3417);let x=(0,o.createContext)(u.lU),f=e=>{let{children:t}=e;(0,s.useRouter)();let{returnUrl:r}=(0,s.useParams)(),[f,y]=(0,o.useReducer)(d.li,u.lU),[I,b]=(0,o.useState)((0,l.L0)()),[v,j]=(0,o.useState)(null),[w,k]=(0,o.useState)([]),S=(0,A.jL)(),T=async()=>{y({type:m.W.SET_IS_INITIALIZED,payload:!0}),n.A.getItem(h.A.storageAccessTokenKey)&&y({type:m.W.SET_USER,payload:JSON.parse(n.A.getItem(h.A.storeUser))}),y({type:m.W.SET_LOADING,payload:!1})},E=async(e,t)=>await i.Ay.get("/sys/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),_=async(e,t)=>{await i.Ay.post(h.A.loginUrl,e).then(async e=>{let t;let{data:a,status:o}=e.data,{roles:i,userInfo:d,menus:u}=a;(null==(t=await E(null==d?void 0:d.userId,null==a?void 0:a.access_token))?void 0:t.data)&&(t=null==t?void 0:t.data),n.A.setItem(h.A.storageAccessTokenKey,a.access_token),n.A.setItem(h.A.storeRefreshTokenKey,a.refresh_token),y({type:m.W.SET_USER,payload:{...d,role:i,menus:[x,{id:(0,l.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard"},...u]}}),n.A.setItem(h.A.storeUser,JSON.stringify({...d,role:i,menus:[{id:(0,l.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard"},...u],...null==t?void 0:t.data})),n.A.setItem(h.A.tabLinks,JSON.stringify([{id:(0,l.lk)(),menuTitleEn:"menu_page.home",menuTitleKr:"menu_page.home",icon:"icon_Dashboard",routFullPath:"/dashboard",routPath:"/dashboard",href:"/dashboard"}]));let c=r&&"/"!==r?r:"/";(0,s.redirect)(c)}).catch(e=>{var r;t&&e&&t(null!==(r=null==e?void 0:e.response)&&void 0!==r?r:e)})},W=async e=>{let t=n.A.getItem(h.A.storeUser);if(!t)return;let r={...JSON.parse(t),...e};n.A.setItem(h.A.storeUser,JSON.stringify(r)),y({type:m.W.SET_USER,payload:r})},C=async(e,t)=>{await i.Ay.post(h.A.registerUrl,{...e,phoneNumber:e.phoneNumber.split("-").join(""),fullName:e.bizOrgName}).then(async r=>{var a;let n=r.data;if((null==n?void 0:null===(a=n.status)||void 0===a?void 0:a.success)===!1){t&&t(n);return}await _({username:e.email,password:e.password})}).catch(e=>{t&&t(e)})},N=async()=>{await p.Dv.signOut(),n.A.removeItem(h.A.storageAccessTokenKey),n.A.removeItem(h.A.storeRefreshTokenKey),n.A.removeItem(h.A.storeUser),n.A.removeItem(h.A.tabLinks),n.A.removeItem(c.d5.cachedRoute),n.A.removeItem("navWidth"),y({type:m.W.SET_USER,payload:null}),y({type:m.W.SET_LOADING,payload:!1}),y({type:m.W.SET_IS_INITIALIZED,payload:!1}),S(g.Xp.logout()),b([]),(0,s.redirect)("/login")};return(0,o.useEffect)(()=>{T()},[]),(0,a.jsx)(x.Provider,{value:{...f,login:_,register:C,logout:N,dispatch:y,tabLists:I,setTabListContext:b,updateCachedData:W,tabSelected:v,setTabSelected:j,listMounted:w,setListMounted:k},children:t})}},93297:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(12115),n=r(30672);let s=()=>(0,a.useContext)(n.c)},11641:(e,t,r)=>{r.r(t),r.d(t,{default:()=>K});var a=r(95155),n=r(89142),s=r(68998),o=r(64665),i=r(39905),l=r(22282),d=r(88648),u=r(79987),m=r(10979),h=r(35761),c=r(41265),p=r(90507),g=r(22678),A=r(11441),x=r(16508),f=r(894),y=r(12115),I=r(94908),b=r(81860),v=r(69606),j=r(19938),w=r(93297),k=r(83737),S=r(5565),T=r(11414);let E=(0,n.Ay)(s.A)(e=>{let{theme:t}=e;return{width:"100%",[t.breakpoints.up("md")]:{maxWidth:514}}}),_=(0,n.Ay)(s.A)(e=>{let{theme:t}=e;return{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",[t.breakpoints.up("sm")]:{width:"28rem",margin:"auto"}}}),W=(0,n.Ay)(o.A)(e=>{let{theme:t}=e;return{background:"#3e4447c9",padding:"1.5rem",[t.breakpoints.up("sm")]:{width:"28rem",margin:"auto"}}}),C=(0,n.Ay)(o.A)(e=>{let{theme:t}=e;return{background:"transparent"}}),N=(0,n.Ay)(s.A)(e=>{let{theme:t}=e;return{[t.breakpoints.down("xl")]:{width:"100%"},[t.breakpoints.down("md")]:{maxWidth:400}}}),R=(0,n.Ay)(i.A)(e=>{let{theme:t}=e;return{"& .MuiInputBase-root":{height:"2.75rem"},".MuiInputBase-input":{height:"2.75rem",padding:0},".MuiInputBase-root":{"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:[t.palette.primary],borderWidth:"1px"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"#fff !important"}},".MuiOutlinedInput-notchedOutline":{borderColor:"#E2E8F0"}}}),O=(0,n.Ay)(l.A)(e=>{let{theme:t}=e;return{}}),P=(0,n.Ay)(d.A)(e=>{let{theme:t}=e;return{padding:4,borderRadius:8,backgroundColor:"#F1F5F9",gap:4,".MuiTabs-flexContainer":{gap:4},minHeight:"auto"}}),D=(0,n.Ay)(u.A)(e=>{let{theme:t}=e;return{padding:".5rem 1rem",borderRadius:6,minWidth:"auto",minHeight:"100%",color:t.palette.primary.main,fontWeight:400,"&.Mui-selected":{color:t.palette.primary.main,fontWeight:600,backgroundColor:"white"}}}),F=(0,n.Ay)(m.A)(e=>{let{theme:t}=e;return{[t.breakpoints.down("sm")]:{flexDirection:"column"}}}),U={password:"123456",username:"admin"},L=j.Ik().shape({username:j.Yj().required("message.thisFieldIsRequired"),password:j.Yj().required("message.thisFieldIsRequired")});(0,n.Ay)(S.default)(e=>{let{theme:t}=e;return{[t.breakpoints.up("sm")]:{width:"28rem",margin:"auto"}}});let M=(e,t)=>({name:e,value:t}),K=()=>{var e,t,r;let n=[M("EN","en"),M("KR","kr")],[o,i]=(0,y.useState)(!1);(0,h.A)();let[l,d]=(0,y.useState)(!1),{t:u,i18n:j}=(0,k.Bd)("common"),[K,q]=(0,y.useState)(null===(e=j.language)||void 0===e?void 0:e.slice(0,2)),z=(0,w.A)(),{control:B,handleSubmit:J,setError:H,formState:{errors:X}}=(0,v.mN)({defaultValues:U,mode:"onSubmit",resolver:(0,b.t)(L)}),Z=async e=>{await z.login(e,e=>{(null==e?void 0:e.message)!=="NEXT_REDIRECT"&&e&&T.Ay.error("Login failed!")})},G=e=>{q(e),j.changeLanguage(e)};return(0,a.jsx)(_,{className:"content-center",children:(0,a.jsxs)(W,{children:[(0,a.jsx)(m.A,{justifyContent:"center",flexDirection:"row",alignItems:"center",maxWidth:"236px",margin:"0 auto",children:(0,a.jsx)(S.default,{src:"/images/logo.png",width:234,height:28,alt:""})}),(0,a.jsx)(c.A,{container:!0,marginTop:6,children:(0,a.jsx)(c.A,{size:{xs:12,md:12},children:(0,a.jsx)(E,{children:(0,a.jsx)(C,{sx:{zIndex:1,borderRadius:0,boxShadow:"none"},children:(0,a.jsx)(s.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(N,{sx:{width:"100%",height:"100%"},children:(0,a.jsxs)("form",{noValidate:!0,method:"POST",autoComplete:"off",onSubmit:J(Z),children:[(0,a.jsx)(p.A,{htmlFor:"username",sx:{marginBottom:"0.25rem",color:"#fff",fontSize:"1rem",fontWeight:500},children:u("auth.id")}),(0,a.jsxs)(g.A,{fullWidth:!0,sx:{mb:6},variant:"standard",children:[(0,a.jsx)(v.xI,{name:"username",control:B,rules:{required:{value:!0,message:u("message.thisFieldRequired")}},render:e=>{let{field:t}=e;return(0,a.jsx)(R,{...t,id:"username",autoComplete:"off",error:!!X.username,placeholder:u("auth.enterId"),InputProps:{startAdornment:(0,a.jsx)(A.A,{position:"start",sx:{color:"#fff"},children:(0,a.jsx)(I.XPP,{})})}})}}),(null===(t=X.username)||void 0===t?void 0:t.message)&&(0,a.jsx)(x.A,{sx:{color:"error.main"},children:u(X.username.message)})]}),(0,a.jsx)(p.A,{htmlFor:"password",sx:{marginBottom:"0.25rem",color:"#fff",fontSize:"1rem",fontWeight:500},children:u("auth.password")}),(0,a.jsxs)(g.A,{fullWidth:!0,children:[(0,a.jsx)(v.xI,{name:"password",control:B,rules:{required:{value:!0,message:u("message.thisFieldRequired")}},render:e=>{let{field:t}=e;return(0,a.jsx)(R,{...t,id:"password",autoComplete:"off",error:!!X.password,type:o?"text":"password",placeholder:u("auth.enterPassword"),InputProps:{startAdornment:(0,a.jsx)(A.A,{position:"start",sx:{color:"#fff"},children:(0,a.jsx)(I.PXj,{})}),endAdornment:(0,a.jsx)(A.A,{position:"end",children:(0,a.jsx)(f.A,{edge:"end",onMouseDown:e=>e.preventDefault(),onClick:()=>i(!o),sx:{color:"#fff"},children:o?(0,a.jsx)(I.bZk,{}):(0,a.jsx)(I.EgV,{})})})}})}}),(null===(r=X.password)||void 0===r?void 0:r.message)&&(0,a.jsx)(x.A,{sx:{color:"error.main",ml:"0 !important"},children:u(X.password.message)})]}),(0,a.jsxs)(F,{marginTop:6,flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",gap:4,children:[(0,a.jsx)("div",{children:(0,a.jsx)(P,{value:K,onChange:(e,t)=>G(t),TabIndicatorProps:{style:{display:"none"}},sx:{maxHeight:40},children:n.map(e=>(0,a.jsx)(D,{label:e.name,value:e.value},e.value))})}),(0,a.jsx)(O,{type:"submit",variant:"contained",disabled:l,size:"large",sx:{minWidth:120,minHeight:40},children:u("button.login")})]})]})})})})})})})]})})}}}]);